<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript 编码规范指南 | IPayNow-FE</title>
    <meta name="description" content="现在支付前端团队文档">
    <link rel="icon" href="/IPayNow-FE/favicon.ico">
    
    <link rel="preload" href="/IPayNow-FE/assets/css/0.styles.9d859946.css" as="style"><link rel="preload" href="/IPayNow-FE/assets/js/app.431e6833.js" as="script"><link rel="preload" href="/IPayNow-FE/assets/js/43.2b5564b9.js" as="script"><link rel="prefetch" href="/IPayNow-FE/assets/js/10.b3d659e2.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/11.6eadb9a6.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/12.82737598.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/13.e818b57e.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/14.43a2f530.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/15.3508a82d.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/16.2b30b985.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/17.e9db9158.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/18.cb909bb7.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/19.10e3a994.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/2.434956ff.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/20.b43db507.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/21.20e7eb97.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/22.7f801c7d.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/23.1a70f68c.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/24.bc3afddc.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/25.26172db0.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/26.89c53ccf.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/27.28f69af5.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/28.87f9ff83.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/29.ce1d4089.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/3.9fc7a634.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/30.44c21287.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/31.2624200d.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/32.4473bcf1.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/33.3df627fd.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/34.590a939a.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/35.143d1e58.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/36.43daf81a.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/37.c7150c21.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/38.8868b89e.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/39.ff090ddb.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/4.02cc0f59.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/40.8f518496.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/41.e98720af.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/42.92d20876.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/44.620ac5f8.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/45.4f7287b4.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/46.8c12d776.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/47.8e30eaf0.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/48.34cc1421.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/49.b217ffc9.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/5.4710a364.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/50.41c2653b.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/51.51fd18f1.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/52.05832c5b.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/6.e11202d3.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/7.ef75715d.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/8.06c61836.js"><link rel="prefetch" href="/IPayNow-FE/assets/js/9.01891828.js">
    <link rel="stylesheet" href="/IPayNow-FE/assets/css/0.styles.9d859946.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/IPayNow-FE/" class="home-link router-link-active"><!----> <span class="site-name">IPayNow-FE</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Vue第三方组件库</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.iviewui.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  iview
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://element-cn.eleme.io/#/zh-CN/component/installation" target="_blank" rel="noopener noreferrer" class="nav-link external">
  elementUI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">小程序第三方组件库</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://youzan.github.io/vant-weapp/#/intro" target="_blank" rel="noopener noreferrer" class="nav-link external">
  有赞
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">小程序第三方开发框架</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://mpvue.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  mpvue
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://nervjs.github.io/taro/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Taro
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/CodeFalling/remax" target="_blank" rel="noopener noreferrer" class="nav-link external">
  remax
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/Leeesin/IPayNow-FE" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Vue第三方组件库</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.iviewui.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  iview
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://element-cn.eleme.io/#/zh-CN/component/installation" target="_blank" rel="noopener noreferrer" class="nav-link external">
  elementUI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">小程序第三方组件库</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://youzan.github.io/vant-weapp/#/intro" target="_blank" rel="noopener noreferrer" class="nav-link external">
  有赞
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">小程序第三方开发框架</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://mpvue.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  mpvue
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://nervjs.github.io/taro/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Taro
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/CodeFalling/remax" target="_blank" rel="noopener noreferrer" class="nav-link external">
  remax
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/Leeesin/IPayNow-FE" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>开发规范</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/IPayNow-FE/开发规范/网页head标签规范.html" class="sidebar-link">网页head标签规范</a></li><li><a href="/IPayNow-FE/开发规范/js开发规范.html" class="active sidebar-link">JavaScript 编码规范指南</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#基本原则-无论有多少人在维护，所有在代码仓库中的代码理应看起来像同一个人写的。" class="sidebar-link">基本原则: 无论有多少人在维护，所有在代码仓库中的代码理应看起来像同一个人写的。</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#项目约定" class="sidebar-link">项目约定</a></li></ul></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#项目规范" class="sidebar-link">项目规范</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#以下针对-es5" class="sidebar-link">以下针对 ES5+</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#前端资源build" class="sidebar-link">前端资源Build</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#规范详情" class="sidebar-link">规范详情</a></li></ul></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#javascript-编码风格" class="sidebar-link">JavaScript 编码风格</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#空白" class="sidebar-link">空白</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#行末和空行" class="sidebar-link">行末和空行</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#花括号-换行" class="sidebar-link">花括号, 换行</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#命名" class="sidebar-link">命名</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#命名空间" class="sidebar-link">命名空间</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#重命名那些名字很长的变量-提高可读性" class="sidebar-link">重命名那些名字很长的变量, 提高可读性</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#除非是枚举类型-不然不要访问别名变量的属性" class="sidebar-link">除非是枚举类型, 不然不要访问别名变量的属性.</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#文件名" class="sidebar-link">文件名</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#自定义-tostring-方法" class="sidebar-link">自定义 toString() 方法</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#延迟初始化" class="sidebar-link">延迟初始化</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#明确作用域" class="sidebar-link">明确作用域</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#代码格式化" class="sidebar-link">代码格式化</a></li></ul></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#javascript-语言规范" class="sidebar-link">JavaScript 语言规范</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#变量" class="sidebar-link">变量</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#常量" class="sidebar-link">常量</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#分号" class="sidebar-link">分号</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#块内函数声明" class="sidebar-link">块内函数声明</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#标准特性" class="sidebar-link">标准特性</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#不要封装基本类型" class="sidebar-link">不要封装基本类型</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#闭包" class="sidebar-link">闭包</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#eval" class="sidebar-link">eval()</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#with" class="sidebar-link">with() {}</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#this" class="sidebar-link">this</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#for-in-循环" class="sidebar-link">for-in 循环</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#多行字符串" class="sidebar-link">多行字符串</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#array-和-object-直接量" class="sidebar-link">Array 和 Object 直接量</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#不要修改内置对象的原型" class="sidebar-link">不要修改内置对象的原型</a></li></ul></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#javascript-小技巧-tips-and-tricks" class="sidebar-link">JavaScript 小技巧(Tips and Tricks)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#true-和-false-布尔表达式" class="sidebar-link">True 和 False 布尔表达式</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#条件-三元-操作符" class="sidebar-link">条件(三元)操作符 (?:)</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#和" class="sidebar-link">&amp;&amp; 和 ||</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#使用-join-来创建字符串" class="sidebar-link">使用 join() 来创建字符串</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#类型检测-来源于-jquery-core-style-guidelines" class="sidebar-link">类型检测 (来源于 jQuery Core Style Guidelines)</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#对比运算" class="sidebar-link">对比运算</a></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#misc" class="sidebar-link">Misc</a></li></ul></li><li class="sidebar-sub-header"><a href="/IPayNow-FE/开发规范/js开发规范.html#保持一致性" class="sidebar-link">保持一致性</a></li></ul></li><li><a href="/IPayNow-FE/开发规范/css开发规范.html" class="sidebar-link">css开发规范</a></li><li><a href="/IPayNow-FE/开发规范/html开发规范.html" class="sidebar-link">html开发规范</a></li><li><a href="/IPayNow-FE/开发规范/Vue开发规范.html" class="sidebar-link">Vue开发规范</a></li><li><a href="/IPayNow-FE/开发规范/接口开发规范.html" class="sidebar-link">接口开发规范</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>项目文档</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/IPayNow-FE/各前端项目文档/运营后台/doc.html" class="sidebar-link">运营后台</a></li><li><a href="/IPayNow-FE/各前端项目文档/商户后台/doc.html" class="sidebar-link">商户后台</a></li><li><a href="/IPayNow-FE/各前端项目文档/易售云小程序/doc.html" class="sidebar-link">易售云小程序</a></li><li><a href="/IPayNow-FE/各前端项目文档/易售云后台管理系统/doc.html" class="sidebar-link">易售云后台管理系统</a></li><li><a href="/IPayNow-FE/各前端项目文档/开张吉祥收银插件/doc.html" class="sidebar-link">开张吉祥收银插件</a></li><li><a href="/IPayNow-FE/各前端项目文档/嗖嗖短信后台管理系统/doc.html" class="sidebar-link">嗖嗖短信后台管理系统</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>生产环境代码发布注意事项</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/IPayNow-FE/生产环境代码发布注意事项/必看.html" class="sidebar-link">注意以下事项</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>JS工具函数</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/IPayNow-FE/JS工具函数/COPY.html" class="sidebar-link">兼容性较强的文本复制</a></li><li><a href="/IPayNow-FE/JS工具函数/轮询函数.html" class="sidebar-link">轮询函数</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Vue组件库</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/IPayNow-FE/Vue组件库/two-fields-date-picker.html" class="sidebar-link">two-fields-date-picker</a></li><li><a href="/IPayNow-FE/Vue组件库/分页组件.html" class="sidebar-link">分页组件</a></li><li><a href="/IPayNow-FE/Vue组件库/权限树组件.html" class="sidebar-link">权限树组件</a></li><li><a href="/IPayNow-FE/Vue组件库/v-card.html" class="sidebar-link">v-card</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Vue进阶</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/IPayNow-FE/Vue基础与进阶/进阶/使用mixin复用业务逻辑.html" class="sidebar-link">使用mixin复用业务逻辑</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>小程序组件库</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/IPayNow-FE/小程序组件库/模态框.html" class="sidebar-link">模态框</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>electron踩坑</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/IPayNow-FE/electron踩坑/设置透明窗口时的兼容性问题.html" class="sidebar-link">设置透明窗口兼容性写法</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>小程序踩坑</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/IPayNow-FE/小程序踩坑/禁止再次分享.html" class="sidebar-link">禁止用户再次分享小程序</a></li><li><a href="/IPayNow-FE/小程序踩坑/小程序授权解决方案总结.html" class="sidebar-link">小程序授权解决方案总结</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>技术文章精选</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/IPayNow-FE/技术文章精选/vue源码解析.html" class="sidebar-link">Vue源码解析</a></li><li><a href="/IPayNow-FE/技术文章精选/200行代码实现简版react.html" class="sidebar-link">200行代码实现简版react🔥</a></li><li><a href="/IPayNow-FE/技术文章精选/Promise实现详解.html" class="sidebar-link">Promise 实现详解</a></li><li><a href="/IPayNow-FE/技术文章精选/利用Vue原理实现一个mini版的MVVM框架.html" class="sidebar-link">💯利用Vue原理实现一个mini版的MVVM框架</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>前端九部</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/IPayNow-FE/前端九部/doc.html" class="sidebar-link">国内最牛逼的前端组织</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="javascript-编码规范指南"><a href="#javascript-编码规范指南" aria-hidden="true" class="header-anchor">#</a> JavaScript 编码规范指南</h1> <h2 id="基本原则-无论有多少人在维护，所有在代码仓库中的代码理应看起来像同一个人写的。"><a href="#基本原则-无论有多少人在维护，所有在代码仓库中的代码理应看起来像同一个人写的。" aria-hidden="true" class="header-anchor">#</a> 基本原则: 无论有多少人在维护，所有在代码仓库中的代码理应看起来像同一个人写的。</h2> <hr> <h3 id="项目约定"><a href="#项目约定" aria-hidden="true" class="header-anchor">#</a> 项目约定</h3> <h2 id="项目规范"><a href="#项目规范" aria-hidden="true" class="header-anchor">#</a> 项目规范</h2> <ol><li>JS/CSS 文件编码统一采用 UTF8编码；</li> <li>代码缩进使用4个空格（或者2个空格，根据项目情况统一约定，达成共识）缩进替代 <code>tab</code> 缩进；</li> <li>一行代码长度尽量保持80列左右；</li> <li>如果编辑器支持在文件保存的时候自动删除行末和空行中的空格(注意:要么全部采用，要么全不采用，否则会产生过多的diff信息)，同时保留文件结尾的空行；</li> <li>JS/CSS 最终发布到产品中的时候需要被压缩，以减小静态资源文件大小，提升页面加载速度；</li> <li>JS里声明变量必须加上 <code>var</code> 关键字，如果项目支持ES5/6则优先使用<code>const</code>和<code>let</code>而不建议使用<code>var</code>, 并将所有的<code>const</code>和<code>let</code>变量放在一起，推荐一条语句声明一个变量；</li> <li>使用 <code>Array</code> 和 <code>Object</code> 语法直接声明并将其初始化,更易读且性能更好, 而不使用 <code>Array</code> 和 <code>Object</code> 构造器；</li> <li>JS里使用单引号 (<code>'</code>) 优于双引号 (<code>&quot;</code>)；</li> <li>JS代码结尾统一约定加';' ；</li> <li>JSON对象的最后一个字段、数组最后一个元素后面都不能加',',在IE8下会报错：所以<code>{a:1,b:2,}/[1,2,]</code> 都是不对的. 但是如果项目支持ES5/6，则推荐在最后一个元素后面加<code>&quot;,&quot;</code>，参考 <code>airbnb/javascript</code> 规范；</li> <li>对象的属性名能不加引号就不加引号；</li> <li>对象属性访问使用<code>&quot;.&quot;</code>运算符，只有当属性名为变量时才用<code>&quot;[]&quot;</code>；</li> <li>没有特殊原因避免使用 <code>with</code>/<code>eval</code>；</li> <li>对于<code>if</code>/<code>else</code>等后面的语句即使只有一行代码也需要在该行代码的首尾加上'{}'. 对于<code>switch</code>语句要给出<code>default:</code>情况的处理逻辑；</li> <li>字符串拼接在少量(次数为个位数)的情况下可以使用'+', 大量的时候使用数组 <code>join()</code>, 或者尽可能采用模板引擎渲染. 如果项目支持ES5/6推荐使用模板字符串；</li> <li><code>for</code>循环遍历：<code>for(var i = 0, l = arr.length; i &lt; l; i++){// doSomething here }</code> 采用这种方式而不是 <code>i &lt; arr.length</code>, 前一种方式只会计算一次 <code>arr</code> 的长度，而后一种方式会计算数组长度 <code>arr.length + 1</code> 次，效率比较低；</li> <li>字符串转换为整数，推荐使用 <code>parseInt(num, 10)</code> 或<code>Number(inputValue)</code>这种方式，<code>+num</code> 写法简单，在操作次数极少的情况下也可以酌情使用。</li> <li>变量比较的时候总是判断最好、最精确的值，推荐使用<code>===</code>少用<code>==</code>(可以参考<a href="https://github.com/jquery/jquery/blob/master/src/core.js" target="_blank" rel="noopener noreferrer">jQuery<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>代码里面, 可以看到只有在<code>== null</code>的时候才可能使用<code>==</code>，其他情况一律使用的是<code>===</code>).</li> <li>JS里变量命名规范使用 <code>functionNamesLikeThis</code>, <code>variableNamesLikeThis</code>, <code>ClassNamesLikeThis</code>, <code>EnumNamesLikeThis</code>, <code>methodNamesLikeThis</code>, 和 <code>SYMBOLIC_CONSTANTS_LIKE_THIS</code>, 尤其不要跟<code>python</code>里面的变量命名方式混淆了; const 常量命名如果是在文件头部定义的针对整个文件的可以全部大写，如果是在函数或者代码块级别定义的可以采用驼峰式命名；</li> <li>不要使用魔法数字，尽量定义一个常量来表示该数字，并加上相应的注释，否则后期可能出现因为数字变化而导致牵一发而动全身，需要到处修改，增加维护成本；</li> <li>JS文件名应该使用小写字符, 不要包含除 <code>-</code> 和 <code>_</code> 外的标点符号(使用 <code>-</code> 优于 <code>_</code>), 我们约定统一使用<code>js-file-name.js</code>这种类型，或者跟模块里面默认<code>export</code>的名称相同；</li> <li>所有的html DOM里面的id, 以及所有样式里面的 class命名使用中划线，如<code>id-name</code>/<code>class-name</code>；</li> <li>注释尽量采用jsdoc的代码注释风格，普通业务代码不做要求，不过通用js类库要求尽量详尽以方便其他人阅读使用；</li> <li>单行注释<code>//</code>后面加一个空格；</li> <li>代表jQuery对象的变量前面可以加个<code>$</code>,这样一眼就能看出来是个jQuery对象。</li> <li>这几篇文章要好好读下——<a href="http://www.ruanyifeng.com/blog/2011/08/jquery_best_practices.html" target="_blank" rel="noopener noreferrer">jQuery最佳实践<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>、<a href="http://lab.abhinayrathore.com/jquery-standards/" target="_blank" rel="noopener noreferrer">Coding Standards &amp; Best Practices<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>jQuery事件绑定:优先使用<code>on</code>/<code>off</code>绑定或者解除绑定事件，因为从jQuery 1.7以后<code>.bind()</code>, <code>.delegate()</code> 都是调用 <code>on</code> 的, <code>live</code>和<code>die</code>已经废弃了；</li> <li>HTML DOM节点上原则上不允许有内嵌的style，样式要尽可能抽出来共用。有些样式定义可以成为全局的，比如字体颜色、大小之类的；有些样式不能公用则应当给相应的页面一个class命名空间，任何针对这个页面的样式都应该在这个命名空间下面定义，这样不至于影响到其他页面。</li> <li>JS存放路径推荐：公共的js第三方类库放在static/js/common/lib下，jQuery相关类库放在static/js/common/lib/jQplugin下，我们自己开发的公共类库放在static/js/common下；</li> <li>鉴于有很多代码是复制粘贴过来的，所以大家要保证自己的代码风格良好且易于阅读，不然别人拷过去后不好的风格就蔓延开了，而且会导致其他人效仿；</li> <li>对于复制粘贴然后做相应修改以实现功能的代码，请务必清理干净，不要有'忘了删除的不影响逻辑的代码'，同时记得将变量名改成适合当前业务场景的有意义的变量名, 不要因为不影响逻辑就保留原来的不适合当前场景的名字；</li> <li>对于系统中出现的大段注释的、过时的、废弃的代码务必及时清理干净，谁制造谁清理，否则其他人也不敢清理，越积越多；</li> <li>在开发相应功能的时候尽量抽象化、组件化、通用化：考虑这个东西其他地方会不会用到，能不能做成一个组件？而不是类似的代码到处复制、修改或者让大家都去写一遍；</li> <li>类似地，在解决问题的时候要考虑下其他地方会不会存在同样的问题？能不能统一解决掉？尤其对于类似ExtJs的Bug这种，能不能做最少的改动解决所有同样的问题,类似于全局补丁？；</li> <li>代码风格跟其他JS文件的代码风格保持一致;</li> <li>代码提交前用<code>JSHint</code>或者<code>ESlint</code>检查一下;</li> <li>另外补充一点：减少不必要的代码嵌套, 比如以下代码：</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>condition<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// Block A: Do something here</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
      <span class="token comment">// Block B: A lot of things to do here</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>可以考虑改成如下形式, 将相对简单的逻辑放在if块里面，执行完毕后立即返回，复杂的逻辑放在外面：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>condition<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// Block A: Do something here</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Block B: A lot of things to do here</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="以下针对-es5"><a href="#以下针对-es5" aria-hidden="true" class="header-anchor">#</a> 以下针对 ES5+</h2> <ol><li>字符串拼接推荐使用模板字符串；</li> <li>对象定义时，其中的属性和方法推荐优先使用简写方式；其中简写的属性放在对象的头部；</li> <li>对象或数组的浅拷贝推荐使用扩展运算符（<code>...</code>)；</li> <li>对于数组尽可能使用：forEach() / map() / every() / filter() / find() / findIndex() / reduce() / some() / ... 来遍历, 通过 Object.keys() / Object.values() / Object.entries() 来将对象转换为数组以采用上述遍历；</li> <li>如有必要函数定义的时候可以指定默认参数而不是之后在函数体中修改参数，同时默认参数放在函数签名的后面；</li> <li>函数定义或调用时如果参数较多需要换行可以考虑每个参数一行，并且在最后一个参数后面加<code>','</code>；</li> <li>对于需要使用匿名函数的场景优先考虑箭头函数；</li> <li>类的定义和扩展使用<code>class</code>和<code>extends</code>关键字，而不是修改函数原型；</li> <li>在只有一个<code>export</code>项的模块里面，优先使用<code>export default</code>而不是其他的命名<code>export</code>；</li> <li>将所有的<code>import</code>语句放在文件的开头；</li> <li>同一个路径的<code>import</code>放在一起，根据情况可以每项一行并适当缩进；</li> <li>在 node.js 环境尽量减少回调嵌套，原则上不超过两级；</li></ol> <h2 id="前端资源build"><a href="#前端资源build" aria-hidden="true" class="header-anchor">#</a> 前端资源Build</h2> <p>项目必须总是提供一些通用的方法来检验（can be linted）、测试和压缩源码以为产品阶段使用做准备。对于此类工作可以使用<code>Grunt</code>或者<code>Gulp</code>配合相应的插件来实现。通过简单的配置即可完成自动对CSS进行检查/压缩/合并，对JS进行检查/压缩/合并，对html文件进行压缩，删除创建目录，拷贝文件，压缩打包等，十分方便。</p> <h3 id="规范详情"><a href="#规范详情" aria-hidden="true" class="header-anchor">#</a> 规范详情</h3> <h2 id="javascript-编码风格"><a href="#javascript-编码风格" aria-hidden="true" class="header-anchor">#</a> JavaScript 编码风格</h2> <h3 id="空白"><a href="#空白" aria-hidden="true" class="header-anchor">#</a> 空白</h3> <ul><li>永远都不要混用空格和Tab。</li> <li>开始一个项目，在写代码之前，选择软缩进（空格）或者 Tab（作为缩进方式），并将其作为<strong>最高准则</strong>。
<ul><li>为了可读, 我总是推荐在你的编辑中设计4个字母宽度的缩进 — 这等同于四个空格或者四个空格替代一个 Tab。</li></ul></li> <li>如果你的编辑器支持，请总是打开 “显示不可见字符” 这个设置。好处是：
<ul><li>保证一致性</li> <li>去掉行末的空格</li> <li>去掉空行的空格</li> <li>提交和对比更具可读性</li></ul></li></ul> <h3 id="行末和空行"><a href="#行末和空行" aria-hidden="true" class="header-anchor">#</a> 行末和空行</h3> <p>留白会破坏 diff 并使diff 结果变得更不可读。考虑包括一个预提交的 hook 自动删除行末和空行中的空格。</p> <h3 id="花括号-换行"><a href="#花括号-换行" aria-hidden="true" class="header-anchor">#</a> 花括号, 换行</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>
    <span class="token comment">// if/else/for/while/try 通常都有小括号、花括号和多行</span>
    <span class="token comment">// 这有助于可读, 以下是很糟糕的写法</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span>condition<span class="token punctuation">)</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">while</span><span class="token punctuation">(</span>condition<span class="token punctuation">)</span> iterating<span class="token operator">++</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">100</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token function">someIterativeFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="命名"><a href="#命名" aria-hidden="true" class="header-anchor">#</a> 命名</h3> <p>通常, 使用 functionNamesLikeThis, variableNamesLikeThis, ClassNamesLikeThis, EnumNamesLikeThis, methodNamesLikeThis, 和 SYMBOLIC_CONSTANTS_LIKE_THIS.</p> <h4 id="属性和方法"><a href="#属性和方法" aria-hidden="true" class="header-anchor">#</a> 属性和方法</h4> <p>文件或类中的 私有 属性, 变量和方法名应该以下划线 &quot;_&quot; 开头.
保护 属性, 变量和方法名不需要下划线开头, 和公共变量名一样.</p> <h4 id="方法和函数参数"><a href="#方法和函数参数" aria-hidden="true" class="header-anchor">#</a> 方法和函数参数</h4> <p>可选参数以 opt_ 开头.</p> <p>函数的参数个数不固定时, 应该添加最后一个参数 var_args 为参数的个数. 你也可以不设置 var_args而取代使用 arguments.</p> <p>可选和可变参数应该在 @param 标记中说明清楚. 虽然这两个规定对编译器没有任何影响, 但还是请尽量遵守</p> <h4 id="getters-和-setters"><a href="#getters-和-setters" aria-hidden="true" class="header-anchor">#</a> Getters 和 Setters</h4> <p>Getters 和 setters 并不是必要的. 但只要使用它们了, 就请将 getters 命名成 getFoo() 形式, 将 setters 命名成 setFoo(value) 形式. (对于布尔类型的 getters, 使用 isFoo() 也可.)</p> <h3 id="命名空间"><a href="#命名空间" aria-hidden="true" class="header-anchor">#</a> 命名空间</h3> <p>JavaScript 不支持包和命名空间.
不容易发现和调试全局命名的冲突, 多个系统集成时还可能因为命名冲突导致很严重的问题. 为了提高 JavaScript 代码复用率, 我们遵循下面的约定以避免冲突.</p> <h4 id="为全局代码使用命名空间"><a href="#为全局代码使用命名空间" aria-hidden="true" class="header-anchor">#</a> 为全局代码使用命名空间</h4> <p>在全局作用域上, 使用一个唯一的, 与工程/库相关的名字作为前缀标识. 比如, 你的工程是 &quot;Project Sloth&quot;, 那么命名空间前缀可取为 sloth.*.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> sloth <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

sloth<span class="token punctuation">.</span><span class="token function-variable function">sleep</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>许多 JavaScript 库, 包括 the Closure Library and Dojo toolkit 为你提供了声明你自己的命名空间的函数. 比如:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>goog<span class="token punctuation">.</span><span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'sloth'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

sloth<span class="token punctuation">.</span><span class="token function-variable function">sleep</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="明确命名空间所有权"><a href="#明确命名空间所有权" aria-hidden="true" class="header-anchor">#</a> 明确命名空间所有权</h4> <p>当选择了一个子命名空间, 请确保父命名空间的负责人知道你在用哪个子命名空间, 比如说, 你为工程 'sloths' 创建一个 'hats' 子命名空间, 那确保 Sloth 团队人员知道你在使用 sloth.hats.</p> <h4 id="外部代码和内部代码使用不同的命名空间"><a href="#外部代码和内部代码使用不同的命名空间" aria-hidden="true" class="header-anchor">#</a> 外部代码和内部代码使用不同的命名空间</h4> <p>&quot;外部代码&quot; 是指来自于你代码体系的外部, 可以独立编译. 内外部命名应该严格保持独立. 如果你使用了外部库, 他的所有对象都在 foo.hats.* 下, 那么你自己的代码不能在 foo.hats.*下命名, 因为很有可能其他团队也在其中命名.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>foo<span class="token punctuation">.</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'foo.hats'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * WRONG -- Do NOT do this.
 * @constructor
 * @extend {foo.hats.RoundHat}
 */</span>
foo<span class="token punctuation">.</span>hats<span class="token punctuation">.</span><span class="token function-variable function">BowlerHat</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="重命名那些名字很长的变量-提高可读性"><a href="#重命名那些名字很长的变量-提高可读性" aria-hidden="true" class="header-anchor">#</a> 重命名那些名字很长的变量, 提高可读性</h3> <p>主要是为了提高可读性. 局部空间中的变量别名只需要取原名字的最后部分.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/**
 * @constructor
 */</span>
some<span class="token punctuation">.</span>long<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span><span class="token function-variable function">MyClass</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @param {some.long.namespace.MyClass} a
 */</span>
some<span class="token punctuation">.</span>long<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>MyClass<span class="token punctuation">.</span><span class="token function-variable function">staticHelper</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

myapp<span class="token punctuation">.</span><span class="token function-variable function">main</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> MyClass <span class="token operator">=</span> some<span class="token punctuation">.</span>long<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>MyClass<span class="token punctuation">;</span>
  <span class="token keyword">var</span> staticHelper <span class="token operator">=</span> some<span class="token punctuation">.</span>long<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>MyClass<span class="token punctuation">.</span>staticHelper<span class="token punctuation">;</span>
  <span class="token function">staticHelper</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="除非是枚举类型-不然不要访问别名变量的属性"><a href="#除非是枚举类型-不然不要访问别名变量的属性" aria-hidden="true" class="header-anchor">#</a> 除非是枚举类型, 不然不要访问别名变量的属性.</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/** @enum {string} */</span>
some<span class="token punctuation">.</span>long<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>Fruit <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token constant">APPLE</span><span class="token punctuation">:</span> <span class="token string">'a'</span><span class="token punctuation">,</span>
  <span class="token constant">BANANA</span><span class="token punctuation">:</span> <span class="token string">'b'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

myapp<span class="token punctuation">.</span><span class="token function-variable function">main</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> Fruit <span class="token operator">=</span> some<span class="token punctuation">.</span>long<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>Fruit<span class="token punctuation">;</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>fruit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> Fruit<span class="token punctuation">.</span><span class="token constant">APPLE</span><span class="token punctuation">:</span>
      <span class="token operator">...</span>
    <span class="token keyword">case</span> Fruit<span class="token punctuation">.</span><span class="token constant">BANANA</span><span class="token punctuation">:</span>
      <span class="token operator">...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
myapp<span class="token punctuation">.</span><span class="token function-variable function">main</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> MyClass <span class="token operator">=</span> some<span class="token punctuation">.</span>long<span class="token punctuation">.</span>namespace<span class="token punctuation">.</span>MyClass<span class="token punctuation">;</span>
  MyClass<span class="token punctuation">.</span><span class="token function">staticHelper</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>不要在全局范围内创建别名, 而仅在函数块作用域中使用.</p> <h3 id="文件名"><a href="#文件名" aria-hidden="true" class="header-anchor">#</a> 文件名</h3> <p>文件名应该使用小写字符, 以避免在有些系统平台上不识别大小写的命名方式. 文件名以.js结尾, 不要包含除 - 和 _ 外的标点符号(使用 - 优于 _).</p> <h3 id="自定义-tostring-方法"><a href="#自定义-tostring-方法" aria-hidden="true" class="header-anchor">#</a> 自定义 toString() 方法</h3> <p>应该总是成功调用且不要抛异常.
可自定义 toString() 方法, 但确保你的实现方法满足: (1) 总是成功 (2) 没有其他负面影响. 如果不满足这两个条件, 那么可能会导致严重的问题, 比如, 如果 toString() 调用了包含 assert 的函数, assert 输出导致失败的对象, 这在 toString() 也会被调用.</p> <h3 id="延迟初始化"><a href="#延迟初始化" aria-hidden="true" class="header-anchor">#</a> 延迟初始化</h3> <p>可以
没必要在每次声明变量时就将其初始化.</p> <h3 id="明确作用域"><a href="#明确作用域" aria-hidden="true" class="header-anchor">#</a> 明确作用域</h3> <p>任何时候都需要
任何时候都要明确作用域 - 提高可移植性和清晰度. 例如, 不要依赖于作用域链中的 window 对象. 可能在其他应用中, 你函数中的 window 不是指之前的那个窗口对象.</p> <h3 id="代码格式化"><a href="#代码格式化" aria-hidden="true" class="header-anchor">#</a> 代码格式化</h3> <h4 id="大括号"><a href="#大括号" aria-hidden="true" class="header-anchor">#</a> 大括号</h4> <p>分号会被隐式插入到代码中, 所以你务必在同一行上插入大括号. 例如:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token keyword">if</span> <span class="token punctuation">(</span>something<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="数组和对象的初始化"><a href="#数组和对象的初始化" aria-hidden="true" class="header-anchor">#</a> 数组和对象的初始化</h4> <p>如果初始值不是很长, 就保持写在单行上:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// No space after [ or before ].</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> c<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// No space after { or before }.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>初始值占用多行时, 缩进2个空格.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// Object initializer.</span>
<span class="token keyword">var</span> inset <span class="token operator">=</span> <span class="token punctuation">{</span>
  top<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  right<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
  bottom<span class="token punctuation">:</span> <span class="token number">15</span><span class="token punctuation">,</span>
  left<span class="token punctuation">:</span> <span class="token number">12</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Array initializer.</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>rows_ <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">'&quot;Slartibartfast&quot; &lt;fjordmaster@magrathea.com&gt;'</span><span class="token punctuation">,</span>
  <span class="token string">'&quot;Zaphod Beeblebrox&quot; &lt;theprez@universe.gov&gt;'</span><span class="token punctuation">,</span>
  <span class="token string">'&quot;Ford Prefect&quot; &lt;ford@theguide.com&gt;'</span><span class="token punctuation">,</span>
  <span class="token string">'&quot;Arthur Dent&quot; &lt;has.no.tea@gmail.com&gt;'</span><span class="token punctuation">,</span>
  <span class="token string">'&quot;Marvin the Paranoid Android&quot; &lt;marv@googlemail.com&gt;'</span><span class="token punctuation">,</span>
  <span class="token string">'the.mice@magrathea.com'</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// Used in a method call.</span>
goog<span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function">createDom</span><span class="token punctuation">(</span>goog<span class="token punctuation">.</span>dom<span class="token punctuation">.</span>TagName<span class="token punctuation">.</span><span class="token constant">DIV</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token string">'foo'</span><span class="token punctuation">,</span>
  className<span class="token punctuation">:</span> <span class="token string">'some-css-class'</span><span class="token punctuation">,</span>
  style<span class="token punctuation">:</span> <span class="token string">'display:none'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'Hello, world!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h4 id="函数参数"><a href="#函数参数" aria-hidden="true" class="header-anchor">#</a> 函数参数</h4> <p>尽量让函数参数在同一行上. 如果一行超过 80 字符, 每个参数独占一行, 并以4个空格缩进, 或者与括号对齐, 以提高可读性. 尽可能不要让每行超过80个字符. 比如下面这样:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// Four-space, wrap at 80.  Works with very long function names, survives</span>
<span class="token comment">// renaming without reindenting, low on space.</span>
goog<span class="token punctuation">.</span>foo<span class="token punctuation">.</span>bar<span class="token punctuation">.</span><span class="token function-variable function">doThingThatIsVeryDifficultToExplain</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>
    veryDescriptiveArgumentNumberOne<span class="token punctuation">,</span> veryDescriptiveArgumentTwo<span class="token punctuation">,</span>
    tableModelEventHandlerProxy<span class="token punctuation">,</span> artichokeDescriptorAdapterIterator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Four-space, one argument per line.  Works with long function names,</span>
<span class="token comment">// survives renaming, and emphasizes each argument.</span>
goog<span class="token punctuation">.</span>foo<span class="token punctuation">.</span>bar<span class="token punctuation">.</span><span class="token function-variable function">doThingThatIsVeryDifficultToExplain</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>
    veryDescriptiveArgumentNumberOne<span class="token punctuation">,</span>
    veryDescriptiveArgumentTwo<span class="token punctuation">,</span>
    tableModelEventHandlerProxy<span class="token punctuation">,</span>
    artichokeDescriptorAdapterIterator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Parenthesis-aligned indentation, wrap at 80.  Visually groups arguments,</span>
<span class="token comment">// low on space.</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span>veryDescriptiveArgumentNumberOne<span class="token punctuation">,</span> veryDescriptiveArgumentTwo<span class="token punctuation">,</span>
             tableModelEventHandlerProxy<span class="token punctuation">,</span> artichokeDescriptorAdapterIterator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// Parenthesis-aligned, one argument per line.  Visually groups and</span>
<span class="token comment">// emphasizes each individual argument.</span>
<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span>veryDescriptiveArgumentNumberOne<span class="token punctuation">,</span>
             veryDescriptiveArgumentTwo<span class="token punctuation">,</span>
             tableModelEventHandlerProxy<span class="token punctuation">,</span>
             artichokeDescriptorAdapterIterator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h4 id="传递匿名函数"><a href="#传递匿名函数" aria-hidden="true" class="header-anchor">#</a> 传递匿名函数</h4> <p>如果参数中有匿名函数, 函数体从调用该函数的左边开始缩进2个空格, 而不是从 function 这个关键字开始. 这让匿名函数更加易读 (不要增加很多没必要的缩进让函数体显示在屏幕的右侧).</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> names <span class="token operator">=</span> items<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">return</span> item<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
                      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

prefix<span class="token punctuation">.</span>something<span class="token punctuation">.</span><span class="token function">reallyLongFunctionName</span><span class="token punctuation">(</span><span class="token string">'whatever'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>a1<span class="token punctuation">,</span> a2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>a1<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>a2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">someOtherLongFunctionName</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">andNowForSomethingCompletelyDifferent</span><span class="token punctuation">(</span>a2<span class="token punctuation">.</span>parrot<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="更多的缩进"><a href="#更多的缩进" aria-hidden="true" class="header-anchor">#</a> 更多的缩进</h4> <p>事实上, 除了 初始化数组和对象 , 和传递匿名函数外, 所有被拆开的多行文本要么选择与之前的表达式左对齐, 要么以4个(而不是2个)空格作为一缩进层次.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>someWonderfulHtml <span class="token operator">=</span> <span class="token string">''</span> <span class="token operator">+</span>
                    <span class="token function">getEvenMoreHtml</span><span class="token punctuation">(</span>someReallyInterestingValues<span class="token punctuation">,</span> moreValues<span class="token punctuation">,</span>
                                    evenMoreParams<span class="token punctuation">,</span> <span class="token string">'a duck'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token number">72</span><span class="token punctuation">,</span>
                                    <span class="token function">slightlyMoreMonkeys</span><span class="token punctuation">(</span><span class="token number">0xfff</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
                    <span class="token string">''</span><span class="token punctuation">;</span>

thisIsAVeryLongVariableName <span class="token operator">=</span>
    <span class="token function">hereIsAnEvenLongerOtherFunctionNameThatWillNotFitOnPrevLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

thisIsAVeryLongVariableName <span class="token operator">=</span> <span class="token string">'expressionPartOne'</span> <span class="token operator">+</span> <span class="token function">someMethodThatIsLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span>
    <span class="token function">thisIsAnEvenLongerOtherFunctionNameThatCannotBeIndentedMore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

someValue <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span>
    shortArg<span class="token punctuation">,</span>
    <span class="token string">'Some really long string arg - this is a pretty common case, actually.'</span><span class="token punctuation">,</span>
    shorty2<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">searchableCollection</span><span class="token punctuation">(</span>allYourStuff<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>theStuffYouWant<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
    <span class="token operator">!</span>ambientNotification<span class="token punctuation">.</span><span class="token function">isActive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>client<span class="token punctuation">.</span><span class="token function">isAmbientSupported</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span>
                                        client<span class="token punctuation">.</span><span class="token function">alwaysTryAmbientAnyways</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  ambientNotification<span class="token punctuation">.</span><span class="token function">activate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h4 id="空行"><a href="#空行" aria-hidden="true" class="header-anchor">#</a> 空行</h4> <p>使用空行来划分一组逻辑上相关联的代码片段.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">doSomethingTo</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">doSomethingElseTo</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">andThen</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">nowDoSomethingWith</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">andNowWith</span><span class="token punctuation">(</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="二元和三元操作符"><a href="#二元和三元操作符" aria-hidden="true" class="header-anchor">#</a> 二元和三元操作符</h4> <p>操作符始终跟随着前行, 这样就不用顾虑分号的隐式插入问题. 如果一行实在放不下, 还是按照上述的缩进风格来换行.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> x <span class="token operator">=</span> a <span class="token operator">?</span> b <span class="token punctuation">:</span> c<span class="token punctuation">;</span>  <span class="token comment">// All on one line if it will fit.</span>

<span class="token comment">// Indentation +4 is OK.</span>
<span class="token keyword">var</span> y <span class="token operator">=</span> a <span class="token operator">?</span>
    longButSimpleOperandB <span class="token punctuation">:</span> longButSimpleOperandC<span class="token punctuation">;</span>

<span class="token comment">// Indenting to the line position of the first operand is also OK.</span>
<span class="token keyword">var</span> z <span class="token operator">=</span> a <span class="token operator">?</span>
        moreComplicatedB <span class="token punctuation">:</span>
        moreComplicatedC<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="括号"><a href="#括号" aria-hidden="true" class="header-anchor">#</a> 括号</h4> <p>只在需要的时候使用
不要滥用括号, 只在必要的时候使用它.</p> <p>对于一元操作符(如delete, typeof 和 void ), 或是在某些关键词(如 return, throw, case, new )之后, 不要使用括号.</p> <h4 id="字符串"><a href="#字符串" aria-hidden="true" class="header-anchor">#</a> 字符串</h4> <p>使用 ' 优于 &quot;
无论你选择单引号还是双引号都无所谓，在 JavaScript 中它们在解析上没有区别。而<strong>绝对需要</strong>强制的是一致性。 <strong>永远不要在同一个项目中混用两种引号，选择一种，并保持一致</strong>。</p> <p>单引号 (') 优于双引号 (&quot;). 当你创建一个包含 HTML 代码的字符串时就知道它的好处了.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> msg <span class="token operator">=</span> <span class="token string">'This is some HTML'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="前置逗号（comma-first）"><a href="#前置逗号（comma-first）" aria-hidden="true" class="header-anchor">#</a> 前置逗号（Comma First）</h4> <p>请勿使用。所有使用这个文档作为基本风格指南的项目都不允许前置逗号的代码格式，除非明确指定或者作者要求。</p> <h4 id="注释"><a href="#注释" aria-hidden="true" class="header-anchor">#</a> 注释</h4> <ul><li>单行注释放于代码上方为首选</li> <li>多行也可以</li> <li>行末注释应被避免!</li> <li>JSDoc 的方式也不错，但需要比较多的时间</li></ul> <h4 id="使用-jsdoc"><a href="#使用-jsdoc" aria-hidden="true" class="header-anchor">#</a> 使用 JSDoc</h4> <p>我们使用 JSDoc 中的注释风格. 行内注释使用 // 变量 的形式. 另外, 我们也遵循 C++ 代码注释风格 . 这也就是说你需要:</p> <ul><li>版权和著作权的信息,</li> <li>文件注释中应该写明该文件的基本信息(如, 这段代码的功能摘要, 如何使用, 与哪些东西相关), 来告诉那些不熟悉代码的读者.</li> <li>类, 函数, 变量和必要的注释,</li> <li>期望在哪些浏览器中执行,</li> <li>正确的大小写, 标点和拼写.</li> <li>为了避免出现句子片段, 请以合适的大/小写单词开头, 并以合适的标点符号结束这个句子.</li></ul> <p>现在假设维护这段代码的是一位初学者. 这可能正好是这样的!</p> <p>目前很多编译器可从 JSDoc 中提取类型信息, 来对代码进行验证, 删除和压缩. 因此, 你很有必要去熟悉正确完整的 JSDoc .</p> <h4 id="顶层-文件注释"><a href="#顶层-文件注释" aria-hidden="true" class="header-anchor">#</a> 顶层/文件注释</h4> <p>顶层注释用于告诉不熟悉这段代码的读者这个文件中包含哪些东西. 应该提供文件的大体内容, 它的作者, 依赖关系和兼容性信息. 如下:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// Copyright 2009 Google Inc. All Rights Reserved.</span>

<span class="token comment">/**
 * @fileoverview Description of file, its uses and information
 * about its dependencies.
 * @author user@google.com (Firstname Lastname)
 */</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="类注释"><a href="#类注释" aria-hidden="true" class="header-anchor">#</a> 类注释</h4> <p>每个类的定义都要附带一份注释, 描述类的功能和用法. 也需要说明构造器参数. 如果该类继承自其它类, 应该使用 @extends 标记. 如果该类是对接口的实现, 应该使用 @implements 标记.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/**
 * Class making something fun and easy.
 * @param {string} arg1 An argument that makes this more interesting.
 * @param {Array.&lt;number&gt;} arg2 List of numbers to be processed.
 * @constructor
 * @extends {goog.Disposable}
 */</span>
project<span class="token punctuation">.</span><span class="token function-variable function">MyClass</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
goog<span class="token punctuation">.</span><span class="token function">inherits</span><span class="token punctuation">(</span>project<span class="token punctuation">.</span>MyClass<span class="token punctuation">,</span> goog<span class="token punctuation">.</span>Disposable<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="方法与函数的注释"><a href="#方法与函数的注释" aria-hidden="true" class="header-anchor">#</a> 方法与函数的注释</h4> <p>提供参数的说明. 使用完整的句子, 并用第三人称来书写方法说明.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/**
 * Converts text to some completely different text.
 * @param {string} arg1 An argument that makes this more interesting.
 * @return {string} Some return value.
 */</span>
project<span class="token punctuation">.</span>MyClass<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">someMethod</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>arg1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Operates on an instance of MyClass and returns something.
 * @param {project.MyClass} obj Instance of MyClass which leads to a long
 *     comment that needs to be wrapped to two lines.
 * @return {boolean} Whether something occured.
 */</span>
<span class="token keyword">function</span> <span class="token function">PR_someMethod</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>对于一些简单的, 不带参数的 getters, 说明可以忽略.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/**
 * @return {Element} The element for the component.
 */</span>
goog<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>Component<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getElement</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element_<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="属性注释"><a href="#属性注释" aria-hidden="true" class="header-anchor">#</a> 属性注释</h4> <p>也需要对属性进行注释.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/**
 * Maximum number of things per pane.
 * @type {number}
 */</span>
project<span class="token punctuation">.</span>MyClass<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>someProperty <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="jsdoc-缩进"><a href="#jsdoc-缩进" aria-hidden="true" class="header-anchor">#</a> JSDoc 缩进</h4> <p>如果你在 @param, @return, @supported, @this 或 @deprecated 中断行, 需要像在代码中一样, 使用4个空格作为一个缩进层次.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/**
 * Illustrates line wrapping for long param/return descriptions.
 * @param {string} foo This is a param with a description too long to fit in
 *     one line.
 * @return {number} This returns something that has a description too long to
 *     fit in one line.
 */</span>
project<span class="token punctuation">.</span>MyClass<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">method</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>不要在 @fileoverview 标记中进行缩进.</p> <p>虽然不建议, 但也可对说明文字进行适当的排版对齐. 不过, 这样带来一些负面影响, 就是当你每次修改变量名时, 都得重新排版说明文字以保持和变量名对齐.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/**
 * This is NOT the preferred indentation method.
 * @param {string} foo This is a param with a description too long to fit in
 *                     one line.
 * @return {number} This returns something that has a description too long to
 *                  fit in one line.
 */</span>
project<span class="token punctuation">.</span>MyClass<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">method</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="枚举"><a href="#枚举" aria-hidden="true" class="header-anchor">#</a> 枚举</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/**
 * Enum for tri-state values.
 * @enum {number}
 */</span>
project<span class="token punctuation">.</span>TriState <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token constant">TRUE</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token constant">FALSE</span><span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token constant">MAYBE</span><span class="token punctuation">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>注意一下, 枚举也具有有效类型, 所以可以当成参数类型来用.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/**
 * Sets project state.
 * @param {project.TriState} state New project state.
 */</span>
project<span class="token punctuation">.</span><span class="token function-variable function">setState</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="javascript-语言规范"><a href="#javascript-语言规范" aria-hidden="true" class="header-anchor">#</a> JavaScript 语言规范</h2> <h3 id="变量"><a href="#变量" aria-hidden="true" class="header-anchor">#</a> 变量</h3> <p>声明变量必须加上 var 关键字.
当你没有写 var, 变量就会暴露在全局上下文中, 这样很可能会和现有变量冲突. 另外, 如果没有加上, 很难明确该变量的作用域是什么, 变量也很可能像在局部作用域中, 很轻易地泄漏到 Document 或者 Window 中, 所以务必用 var 去声明变量.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>
  <span class="token comment">// 变量</span>
  <span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token string">&quot;bar&quot;</span><span class="token punctuation">,</span>
    num <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    undef<span class="token punctuation">;</span>

  <span class="token comment">// 字面量标识:</span>
  <span class="token keyword">var</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    object <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// 在一个作用域（函数）内只使用一个 `var` 有助于提升可读性</span>
  <span class="token comment">// 并且让你的声明列表变得有条不紊 (还帮你省了几次键盘敲击)</span>

  <span class="token comment">// 不好</span>
  <span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> bar <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> qux<span class="token punctuation">;</span>

  <span class="token comment">// 好的做法</span>
  <span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    bar <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    quux<span class="token punctuation">;</span>

  <span class="token comment">// 或者..</span>
  <span class="token keyword">var</span> <span class="token comment">// 对这些变量的注释</span>
  foo <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  bar <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  quux<span class="token punctuation">;</span>

  <span class="token comment">// `var` 语句必须总是在各自作用域（函数）顶部</span>
  <span class="token comment">// 同样适应于来自 ECMAScript 6 的常量</span>

  <span class="token comment">// 不好</span>
  <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// 在变量前有语句</span>

    <span class="token keyword">var</span> bar <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
      qux<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 好</span>
  <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> bar <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
      qux<span class="token punctuation">;</span>

    <span class="token comment">// 所有语句都在变量之后</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><h3 id="常量"><a href="#常量" aria-hidden="true" class="header-anchor">#</a> 常量</h3> <p>常量的形式如: NAMES_LIKE_THIS, 即使用大写字符, 并用下划线分隔. 你也可用 @const 标记来指明它是一个常量. 但请永远不要使用 const 关键词.</p> <p>Decision:
对于基本类型的常量, 只需转换命名.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>
  <span class="token comment">/**
   * The number of seconds in a minute.
   * @type {number}
   */</span>
  goog<span class="token punctuation">.</span>example<span class="token punctuation">.</span><span class="token constant">SECONDS_IN_A_MINUTE</span> <span class="token operator">=</span> <span class="token number">60</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>对于非基本类型, 使用 @const 标记.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>
<span class="token comment">/**
 * The number of seconds in each of the given units.
 * @type {Object.&lt;number&gt;}
 * @const
 */</span>
goog<span class="token punctuation">.</span>example<span class="token punctuation">.</span><span class="token constant">SECONDS_TABLE</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  minute<span class="token punctuation">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
  hour<span class="token punctuation">:</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">,</span>
  day<span class="token punctuation">:</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">24</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>这标记告诉编译器它是常量.</p> <p>至于关键词 const, 因为 IE 不能识别, 所以不要使用.</p> <h3 id="分号"><a href="#分号" aria-hidden="true" class="header-anchor">#</a> 分号</h3> <p>总是使用分号.</p> <p>如果仅依靠语句间的隐式分隔, 有时会很麻烦. 你自己更能清楚哪里是语句的起止. 而且有些情况下, 漏掉分号会很危险，可能会导致代码合并错误等，又比如:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>
  <span class="token comment">// 1.</span>
  MyClass<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myMethod</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">42</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>  <span class="token comment">// No semicolon here.</span>

  <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Some initialization code wrapped in a function to create a scope for locals.</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> <span class="token constant">THINGS_TO_EAT</span> <span class="token operator">=</span> <span class="token punctuation">[</span>apples<span class="token punctuation">,</span> oysters<span class="token punctuation">,</span> sprayOnCheese<span class="token punctuation">]</span>  <span class="token comment">// No semicolon here.</span>

  <span class="token comment">// 2. conditional execution a la bash</span>
  <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">==</span> <span class="token function">resultOfOperation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">die</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>这段代码会发生些什么诡异事呢?</p> <ol><li>报 JavaScript 错误 - 例子1上的语句会解释成, 一个函数带一匿名函数作为参数而被调用, 返回42后, 又一次被&quot;调用&quot;, 这就导致了错误.</li> <li>当 resultOfOperation() 返回非 NaN 时, 就会调用die, 其结果也会赋给 THINGS_TO_EAT.
为什么?</li></ol> <p>JavaScript 的语句以分号作为结束符, 除非可以非常准确推断某结束位置才会省略分号. 上面的例子产出错误, 均是在语句中声明了函数/对象/数组直接量, 但 闭括号('}'或']')并不足以表示该语句的结束. 在 JavaScript 中, 只有当语句后的下一个符号是后缀或括号运算符时, 才会认为该语句的结束. 参考：<a href="http://justjavac.iteye.com/blog/1852405" target="_blank" rel="noopener noreferrer">JS分号自动插入机制<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>遗漏分号有时会出现很奇怪的结果, 所以确保语句以分号结束.</p> <h3 id="块内函数声明"><a href="#块内函数声明" aria-hidden="true" class="header-anchor">#</a> 块内函数声明</h3> <p>不要在块内声明一个函数，不要写成:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>虽然很多 JS 引擎都支持块内声明函数, 但它不属于 ECMAScript 规范 (见 <a href="http://www.ecma-international.org/publications/standards/Ecma-262.htm" target="_blank" rel="noopener noreferrer">ECMA-262<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, 第13和14条). 各个浏览器糟糕的实现相互不兼容, 有些也与未来 ECMAScript 草案相违背. ECMAScript 只允许在脚本的根语句或函数中声明函数. 如果确实需要在块中定义函数, 建议使用函数表达式来初始化变量:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="标准特性"><a href="#标准特性" aria-hidden="true" class="header-anchor">#</a> 标准特性</h3> <p>标准特性总是优于非标准特性.
最大化可移植性和兼容性, 尽量使用标准方法而不是用非标准方法, (比如, 优先用string.charAt(3) 而不用 string[3] , 通过 DOM 原生函数访问元素, 而不是使用应用封装好的快速接口.</p> <h3 id="不要封装基本类型"><a href="#不要封装基本类型" aria-hidden="true" class="header-anchor">#</a> 不要封装基本类型</h3> <p>没有任何理由去封装基本类型, 另外还存在一些风险:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'hi'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Shows 'hi'.</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>除非明确用于类型转换, 其他情况请千万不要这样做！</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'hi'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// This will never be alerted.</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">typeof</span> <span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'boolean'</span><span class="token punctuation">;</span>
  <span class="token keyword">typeof</span> <span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'object'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>有时用作 number, string 或 boolean时, 类型的转换会非常实用.</p> <h3 id="闭包"><a href="#闭包" aria-hidden="true" class="header-anchor">#</a> 闭包</h3> <p>可以, 但小心使用.
闭包也许是 JS 中最有用的特性了. 有一份比较好的介绍闭包原理的<a href="http://jibbering.com/faq/notes/closures/" target="_blank" rel="noopener noreferrer">文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>有一点需要牢记, 闭包保留了一个指向它封闭作用域的指针, 所以, 在给 DOM 元素附加闭包时, 很可能会产生循环引用, 进一步导致内存泄漏. 比如下面的代码:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    element<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* uses a and b */</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>这里, 即使没有使用 element, 闭包也保留了 element, a 和 b 的引用, 由于 element 也保留了对闭包的引用, 这就产生了循环引用, 这就不能被 GC 回收. 这种情况下, 可将代码重构为:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    element<span class="token punctuation">.</span>onclick <span class="token operator">=</span> <span class="token function">bar</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* uses a and b */</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="eval"><a href="#eval" aria-hidden="true" class="header-anchor">#</a> eval()</h3> <p>只用于解析序列化串 (如: 解析 RPC 响应), 而且解析序列号字符串用JSON.parse()会更好，所以最好放弃使用 eval().
eval() 会让程序执行的比较混乱, 当 eval() 里面包含用户输入的话就更加危险. 可以用其他更佳的, 更清晰, 更安全的方式写你的代码, 所以一般情况下请不要使用 eval(). 当碰到一些需要解析序列化串的情况下(如, 计算 RPC 响应), 使用 eval 很容易实现.</p> <p>解析序列化串是指将字节流转换成内存中的数据结构. 比如, 你可能会将一个对象输出成文件形式:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  users <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> <span class="token string">'Eric'</span><span class="token punctuation">,</span>
      id<span class="token punctuation">:</span> <span class="token number">37824</span><span class="token punctuation">,</span>
      email<span class="token punctuation">:</span> <span class="token string">'jellyvore@myway.com'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> <span class="token string">'xtof'</span><span class="token punctuation">,</span>
      id<span class="token punctuation">:</span> <span class="token number">31337</span><span class="token punctuation">,</span>
      email<span class="token punctuation">:</span> <span class="token string">'b4d455h4x0r@google.com'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>很简单地调用 eval 后, 把表示成文件的数据读取回内存中.</p> <p>类似的, eval() 对 RPC 响应值进行解码. 例如, 你在使用 XMLHttpRequest 发出一个 RPC 请求后, 通过 eval () 将服务端的响应文本转成 JavaScript 对象:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token keyword">var</span> userOnline <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token string">'nusrat'</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> xmlhttp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xmlhttp<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'http://chat.google.com/isUserOnline?user='</span> <span class="token operator">+</span> user<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xmlhttp<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Server returns:</span>
  <span class="token comment">// userOnline = true;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>xmlhttp<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">eval</span><span class="token punctuation">(</span>xmlhttp<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// userOnline is now true.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="with"><a href="#with" aria-hidden="true" class="header-anchor">#</a> with() {}</h3> <p>不要使用
使用 with 让你的代码在语义上变得不清晰. 因为 with 的对象, 可能会与局部变量产生冲突, 从而改变你程序原本的用义. 下面的代码是干嘛的?</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token keyword">with</span> <span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> x<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>答案: 任何事. 局部变量 x 可能被 foo 的属性覆盖, 当它定义一个 setter 时, 在赋值 3 后会执行很多其他代码. 所以不要使用 with 语句.</p> <h3 id="this"><a href="#this" aria-hidden="true" class="header-anchor">#</a> this</h3> <p>仅在对象构造器, 方法, 闭包中使用.
this 的语义很特别. 有时它引用一个全局对象(大多数情况下), 调用者的作用域(使用 eval时), DOM 树中的节点(添加事件处理函数时), 新创建的对象(使用一个构造器), 或者其他对象(如果函数被 call() 或 apply()).</p> <p>使用时很容易出错, 所以只有在下面两个情况时才能使用:</p> <ul><li>在构造器中</li> <li>对象的方法(包括创建的闭包)中</li></ul> <h3 id="for-in-循环"><a href="#for-in-循环" aria-hidden="true" class="header-anchor">#</a> for-in 循环</h3> <p>只用于 object/map/hash 的遍历
对 Array 用 for-in 循环有时会出错. 因为它并不是从 0 到 length - 1 进行遍历, 而是所有出现在对象及其原型链的键值. 下面就是一些失败的使用案例:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token keyword">function</span> <span class="token function">printArray</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">printArray</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// This works.</span>

  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">printArray</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// This is wrong.</span>

  a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">printArray</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// This is wrong.</span>

  a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  a<span class="token punctuation">.</span>buhu <span class="token operator">=</span> <span class="token string">'wine'</span><span class="token punctuation">;</span>
  <span class="token function">printArray</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// This is wrong again.</span>

  a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">;</span>
  a<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
  <span class="token function">printArray</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// This is wrong again.</span>

  <span class="token comment">// 而遍历数组通常用最普通的 for 循环.</span>
  <span class="token keyword">function</span> <span class="token function">printArray</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> l <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="多行字符串"><a href="#多行字符串" aria-hidden="true" class="header-anchor">#</a> 多行字符串</h3> <p>不要使用. 不要这样写长字符串:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> myString <span class="token operator">=</span> <span class="token string">'A rather long string of English text, an error message \
                actually that just keeps going and going -- an error \
                message to make the Energizer bunny blush (right through \
                those Schwarzenegger shades)! Where was I? Oh yes, \
                you\'ve got an error and all the extraneous whitespace is \
                just gravy.  Have a nice day.'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>在编译时, 不能忽略行起始位置的空白字符; &quot;&quot; 后的空白字符会产生奇怪的错误; 虽然大多数脚本引擎支持这种写法, 但它不是 ECMAScript 的标准规范.</p> <h3 id="array-和-object-直接量"><a href="#array-和-object-直接量" aria-hidden="true" class="header-anchor">#</a> Array 和 Object 直接量</h3> <p>使用 Array 和 Object 语法, 而不使用 Array 和 Object 构造器.</p> <p>使用 Array 构造器很容易因为传参不恰当导致错误.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token comment">// Length is 3.</span>
  <span class="token keyword">var</span> a1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>x1<span class="token punctuation">,</span> x2<span class="token punctuation">,</span> x3<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Length is 2.</span>
  <span class="token keyword">var</span> a2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>x1<span class="token punctuation">,</span> x2<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// If x1 is a number and it is a natural number the length will be x1.</span>
  <span class="token comment">// If x1 is a number but not a natural number this will throw an exception.</span>
  <span class="token comment">// Otherwise the array will have one element with x1 as its value.</span>
  <span class="token keyword">var</span> a3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>x1<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Length is 0.</span>
  <span class="token keyword">var</span> a4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>如果传入一个参数而不是2个参数, 数组的长度很有可能就不是你期望的数值了.</p> <p>为了避免这些歧义, 我们应该使用更易读的直接量来声明.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span>x1<span class="token punctuation">,</span> x2<span class="token punctuation">,</span> x3<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> a2 <span class="token operator">=</span> <span class="token punctuation">[</span>x1<span class="token punctuation">,</span> x2<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> a3 <span class="token operator">=</span> <span class="token punctuation">[</span>x1<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> a4 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>虽然 Object 构造器没有上述类似的问题, 但鉴于可读性和一致性考虑, 最好还是在字面上更清晰地指明. 例如：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> o2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  o2<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  o2<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  o2<span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
  o2<span class="token punctuation">[</span><span class="token string">'strange key'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>应该写成:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> o2 <span class="token operator">=</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    b<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    c<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token string">'strange key'</span><span class="token punctuation">:</span> <span class="token number">3</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="不要修改内置对象的原型"><a href="#不要修改内置对象的原型" aria-hidden="true" class="header-anchor">#</a> 不要修改内置对象的原型</h3> <p>千万不要修改内置对象, 如 Object.prototype 和 Array.prototype 的原型. 而修改内置对象, 如 Function.prototype 的原型, 虽然少危险些, 但仍会导致调试时的诡异现象. 所以也要避免修改其原型.</p> <h2 id="javascript-小技巧-tips-and-tricks"><a href="#javascript-小技巧-tips-and-tricks" aria-hidden="true" class="header-anchor">#</a> JavaScript 小技巧(Tips and Tricks)</h2> <h3 id="true-和-false-布尔表达式"><a href="#true-和-false-布尔表达式" aria-hidden="true" class="header-anchor">#</a> True 和 False 布尔表达式</h3> <p>下面的布尔表达式都返回 false:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">null</span>
undefined
<span class="token string">''</span>          <span class="token comment">// 空字符串</span>
<span class="token number">0</span>           <span class="token comment">//数字0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>但小心下面的, 可都返回 true:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token string">'0'</span>   <span class="token comment">// 字符串0</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token comment">// 空数组</span>
<span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token comment">// 空对象</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>下面是一段比较糟糕的代码:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">while</span> <span class="token punctuation">(</span>x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>你可以直接写成下面的形式(只要你希望 x 不是 0 和空字符串, 和 false):</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">while</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果你想检查字符串是否为 null 或空:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>y <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> y <span class="token operator">!=</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>但这样会更好:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>注意: 还有很多需要注意的地方, 如:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token boolean">true</span>
    <span class="token string">'0'</span> <span class="token operator">!=</span> <span class="token boolean">true</span>
    <span class="token number">0</span> <span class="token operator">!=</span> <span class="token keyword">null</span>
    <span class="token number">0</span> <span class="token operator">==</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token number">0</span> <span class="token operator">==</span> <span class="token boolean">false</span>
    <span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token boolean">false</span>
    <span class="token keyword">null</span> <span class="token operator">!=</span> <span class="token boolean">true</span>
    <span class="token keyword">null</span> <span class="token operator">!=</span> <span class="token boolean">false</span>
    <span class="token function">Boolean</span><span class="token punctuation">(</span>undefined<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token boolean">false</span>
    undefined <span class="token operator">!=</span> <span class="token boolean">true</span>
    undefined <span class="token operator">!=</span> <span class="token boolean">false</span>
    <span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token boolean">true</span>
    <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token boolean">true</span>
    <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">false</span>
    <span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token boolean">true</span>
    <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">!=</span> <span class="token boolean">true</span>
    <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">!=</span> <span class="token boolean">false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="条件-三元-操作符"><a href="#条件-三元-操作符" aria-hidden="true" class="header-anchor">#</a> 条件(三元)操作符 (?😃</h3> <p>三元操作符用于替代下面的代码:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>你可以写成:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token keyword">return</span> val <span class="token operator">?</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在生成 HTML 代码时也是很有用的:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token keyword">var</span> html <span class="token operator">=</span> <span class="token string">'&lt;input type=&quot;checkbox&quot;'</span> <span class="token operator">+</span>
      <span class="token punctuation">(</span>isChecked <span class="token operator">?</span> <span class="token string">' checked'</span> <span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token operator">+</span>
      <span class="token punctuation">(</span>isEnabled <span class="token operator">?</span> <span class="token string">''</span> <span class="token punctuation">:</span> <span class="token string">' disabled'</span><span class="token punctuation">)</span> <span class="token operator">+</span>
      <span class="token string">' name=&quot;foo&quot;&gt;'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="和"><a href="#和" aria-hidden="true" class="header-anchor">#</a> &amp;&amp; 和 ||</h3> <p>二元布尔操作符是可短路的, 只有在必要时才会计算到最后一项.</p> <p>&quot;||&quot; 被称作为 'default' 操作符, 因为可以这样:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token comment">/** @param {*=} opt_win */</span>
    <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span>opt_win<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> win<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>opt_win<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        win <span class="token operator">=</span> opt_win<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        win <span class="token operator">=</span> window<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>你可以使用它来简化上面的代码:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token comment">/** @param {*=} opt_win */</span>
    <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span>opt_win<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> win <span class="token operator">=</span> opt_win <span class="token operator">||</span> window<span class="token punctuation">;</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>&quot;&amp;&amp;&quot; 也可简短代码.比如:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>kids<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>kids<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">foo</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>kids<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>你可以像这样来使用:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token keyword">if</span> <span class="token punctuation">(</span>node <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>kids <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>kids<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">foo</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>kids<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>或者:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token keyword">var</span> kid <span class="token operator">=</span> node <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>kids <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>kids<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>kid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">foo</span><span class="token punctuation">(</span>kid<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>不过这样就有点儿过头了:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    node <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>kids <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>kids<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token function">foo</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>kids<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="使用-join-来创建字符串"><a href="#使用-join-来创建字符串" aria-hidden="true" class="header-anchor">#</a> 使用 join() 来创建字符串</h3> <p>通常是这样使用的:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token keyword">function</span> <span class="token function">listHtml</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> html <span class="token operator">=</span> <span class="token string">'&lt;div class=&quot;foo&quot;&gt;'</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> items<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          html <span class="token operator">+=</span> <span class="token string">', '</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        html <span class="token operator">+=</span> <span class="token function">itemHtml</span><span class="token punctuation">(</span>items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      html <span class="token operator">+=</span> <span class="token string">'&lt;/div&gt;'</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> html<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>但这样在 IE 下非常慢, 可以用下面的方式:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token keyword">function</span> <span class="token function">listHtml</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> html <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> items<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        html<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">itemHtml</span><span class="token punctuation">(</span>items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token string">'&lt;div class=&quot;foo&quot;&gt;'</span> <span class="token operator">+</span> html<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">', '</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'&lt;/div&gt;'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>你也可以是用数组作为字符串构造器, 然后通过 myArray.join('') 转换成字符串. 不过由于赋值操作快于数组的 push(), 所以尽量使用赋值操作.</p> <h3 id="类型检测-来源于-jquery-core-style-guidelines"><a href="#类型检测-来源于-jquery-core-style-guidelines" aria-hidden="true" class="header-anchor">#</a> 类型检测 (来源于 jQuery Core Style Guidelines)</h3> <ul><li><p>直接类型（实际类型，Actual Types）</p> <p>String:</p> <pre><code>  typeof variable === &quot;string&quot;
</code></pre> <p>Number:</p> <pre><code>  typeof variable === &quot;number&quot;
</code></pre> <p>Boolean:</p> <pre><code>  typeof variable === &quot;boolean&quot;
</code></pre> <p>Object:</p> <pre><code>  typeof variable === &quot;object&quot;
</code></pre> <p>Array:</p> <pre><code>  Array.isArray(arrayLikeObject)
  (如果可能的话)
</code></pre> <p>Node:</p> <pre><code>  elem.nodeType === 1
</code></pre> <p>null:</p> <pre><code>  variable === null
</code></pre> <p>null or undefined:</p> <pre><code>  variable == null
</code></pre> <p>undefined:</p> <pre><code>全局变量:

  typeof variable === &quot;undefined&quot;

局部变量:

  variable === undefined

属性:

  object.prop === undefined
  object.hasOwnProperty(prop)
  &quot;prop&quot; in object
</code></pre></li> <li><p>转换类型（强制类型，Coerced Types）</p> <p>考虑下面这个的含义...</p> <p>给定的 HTML:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>foo-input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>
<span class="token comment">// `foo` 已经被赋予值 `0`，类型为 `number`</span>
<span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token comment">// typeof foo;</span>
<span class="token comment">// &quot;number&quot;</span>
<span class="token operator">...</span>

<span class="token comment">// 在后续的代码中，你需要更新 `foo`，赋予在 input 元素中得到的新值</span>

foo <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;foo-input&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>

<span class="token comment">// 如果你现在测试 `typeof foo`, 结果将是 `string`</span>
<span class="token comment">// 这意味着你在 if 语句检测 `foo` 有类似于此的逻辑:</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>foo <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">importantTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// `importantTask()` 将永远不会被执行，即使 `foo` 有一个值 &quot;1&quot;</span>

<span class="token comment">// 你可以巧妙地使用 + / - 一元运算符强制转换类型以解决问题:</span>

foo <span class="token operator">=</span> <span class="token operator">+</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;foo-input&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
<span class="token comment">//    ^ + 一元运算符将它右边的运算对象转换为 `number`</span>

<span class="token comment">// typeof foo;</span>
<span class="token comment">// &quot;number&quot;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>foo <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">importantTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// `importantTask()` 将被调用</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p>对于强制类型转换这里有几个例子:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>
<span class="token keyword">var</span> number <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
  string <span class="token operator">=</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
  bool <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

number<span class="token punctuation">;</span>
<span class="token comment">// 1</span>

number <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// &quot;1&quot;</span>

string<span class="token punctuation">;</span>
<span class="token comment">// &quot;1&quot;</span>

<span class="token operator">+</span>string<span class="token punctuation">;</span>
<span class="token comment">// 1</span>

<span class="token operator">+</span>string<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token comment">// 1</span>

string<span class="token punctuation">;</span>
<span class="token comment">// 2</span>

bool<span class="token punctuation">;</span>
<span class="token comment">// false</span>

<span class="token operator">+</span>bool<span class="token punctuation">;</span>
<span class="token comment">// 0</span>

bool <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// &quot;false&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>
<span class="token keyword">var</span> number <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
  string <span class="token operator">=</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
  bool <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

string <span class="token operator">===</span> number<span class="token punctuation">;</span>
<span class="token comment">// false</span>

string <span class="token operator">===</span> number <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// true</span>

<span class="token operator">+</span>string <span class="token operator">===</span> number<span class="token punctuation">;</span>
<span class="token comment">// true</span>

bool <span class="token operator">===</span> number<span class="token punctuation">;</span>
<span class="token comment">// false</span>

<span class="token operator">+</span>bool <span class="token operator">===</span> number<span class="token punctuation">;</span>
<span class="token comment">// true</span>

bool <span class="token operator">===</span> string<span class="token punctuation">;</span>
<span class="token comment">// false</span>

bool <span class="token operator">===</span> <span class="token operator">!</span><span class="token operator">!</span>string<span class="token punctuation">;</span>
<span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>
<span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">2.5</span><span class="token punctuation">;</span>

<span class="token function">parseInt</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 等价于...</span>

<span class="token operator">~</span><span class="token operator">~</span>num<span class="token punctuation">;</span>

num <span class="token operator">&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>

num <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token comment">// 结果都是 2</span>


<span class="token comment">// 时刻牢记心底, 负值将被区别对待...</span>

<span class="token keyword">var</span> neg <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">2.5</span><span class="token punctuation">;</span>

<span class="token function">parseInt</span><span class="token punctuation">(</span>neg<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 等价于...</span>

<span class="token operator">~</span><span class="token operator">~</span>neg<span class="token punctuation">;</span>

neg <span class="token operator">&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token comment">// 结果都是 -2</span>
<span class="token comment">// 但是...</span>

neg <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token comment">// 结果即是 4294967294</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div></li> <li><p>字符串转换为整数</p></li></ul> <p>将字符串转换为整数有以下几种方式，可以在<a href="http://jsperf.com/converting-string-to-int/2" target="_blank" rel="noopener noreferrer">这里<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>进行测试对比：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token keyword">var</span> number1 <span class="token operator">=</span> <span class="token string">&quot;45&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">// ParseInt() Test on chrome for mac:31% slower</span>
    <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>number1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Using unary Test on chrome for mac:67% slower</span>
    <span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token operator">+</span>number1<span class="token punctuation">;</span>
    <span class="token comment">// Number constructor Test on chrome for mac:59% slower</span>
    <span class="token keyword">var</span> k <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>number1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// By multplication Test on chrome for mac:69% slower</span>
    <span class="token keyword">var</span> l <span class="token operator">=</span> number1 <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">// parseInt with Test on chrome for mac:radix ±3.85% fastest</span>
    <span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>number1<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>所以推荐使用 parseInt(number1, 10) 这种方式，不过 +number1 更为简单，在操作次数极少的情况下也可以酌情使用。</p> <h3 id="对比运算"><a href="#对比运算" aria-hidden="true" class="header-anchor">#</a> 对比运算</h3> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token comment">// 当只是判断一个 array 是否有长度，相对于使用这个:</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>array<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">...</span>

    <span class="token comment">// ...判断真伪, 请使用这种:</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>array<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">...</span>

    <span class="token comment">// 当只是判断一个 array 是否为空，相对于使用这个:</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>array<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">...</span>

    <span class="token comment">// ...判断真伪, 请使用这种:</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>array<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">...</span>

    <span class="token comment">// 当只是判断一个 string 是否为空，相对于使用这个:</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>string <span class="token operator">!==</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token operator">...</span>

    <span class="token comment">// ...判断真伪, 请使用这种:</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>string<span class="token punctuation">)</span> <span class="token operator">...</span>

    <span class="token comment">// 当只是判断一个 string 是为空，相对于使用这个:</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>string <span class="token operator">===</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token operator">...</span>

    <span class="token comment">// ...判断真伪, 请使用这种:</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>string<span class="token punctuation">)</span> <span class="token operator">...</span>

    <span class="token comment">// 当只是判断一个引用是为真，相对于使用这个:</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>foo <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">...</span>

    <span class="token comment">// ...判断只需像你所想，享受内置功能的好处:</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token operator">...</span>

    <span class="token comment">// 当只是判断一个引用是为假，相对于使用这个:</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>foo <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">...</span>

    <span class="token comment">// ...使用叹号将其转换为真</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>foo<span class="token punctuation">)</span> <span class="token operator">...</span>

    <span class="token comment">// ...需要注意的是：这个将会匹配 0, &quot;&quot;, null, undefined, NaN</span>
    <span class="token comment">// 如果你 _必须_ 是布尔类型的 false，请这样用：</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>foo <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">...</span>

    <span class="token comment">// 如果想计算一个引用可能是 null 或者 undefined，但并不是 false, &quot;&quot; 或者 0,</span>
    <span class="token comment">// 相对于使用这个：</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>foo <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> foo <span class="token operator">===</span> undefined<span class="token punctuation">)</span> <span class="token operator">...</span>

    <span class="token comment">// ...享受 == 类型强制转换的好处，像这样:</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>foo <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">...</span>

    <span class="token comment">// 谨记，使用 == 将会令 `null` 匹配 `null` 和 `undefined`</span>
    <span class="token comment">// 但不是 `false`，&quot;&quot; 或者 0</span>
    <span class="token keyword">null</span> <span class="token operator">==</span> undefined
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><p>总是判断最好、最精确的值，上述是指南而非教条。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token comment">// 类型转换和对比运算说明</span>
    <span class="token comment">// 首次 `===`，`==` 次之 (除非需要松散类型的对比)</span>
    <span class="token comment">// `===` 总不做类型转换，这意味着:</span>
    <span class="token string">&quot;1&quot;</span> <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">// false</span>

    <span class="token comment">// `==` 会转换类型，这意味着:</span>
    <span class="token string">&quot;1&quot;</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">// true</span>

    <span class="token comment">// 布尔, 真 &amp; 伪</span>
    <span class="token comment">// 布尔:</span>
    <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span>

    <span class="token comment">// 真:</span>
    <span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span>

    <span class="token comment">// 伪:</span>
    <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> undefined<span class="token punctuation">,</span> <span class="token number">NaN</span><span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="misc"><a href="#misc" aria-hidden="true" class="header-anchor">#</a> Misc</h3> <p>这个部分将要说明的想法和理念都并非教条。相反更鼓励对现存实践保持好奇，以尝试提供完成一般 JavaScript 编程任务的更好方案。</p> <ul><li><p>提前返回值提升代码的可读性并且没有太多性能上的差别</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>
<span class="token comment">// 不好:</span>
<span class="token keyword">function</span> <span class="token function">returnLate</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> ret<span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ret <span class="token operator">=</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    ret <span class="token operator">=</span> <span class="token string">&quot;quux&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 好:</span>
<span class="token keyword">function</span> <span class="token function">returnEarly</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token string">&quot;quux&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div></li> <li><p>for循环遍历</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// for循环遍历:</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// doSomething here</span>
<span class="token punctuation">}</span>
<span class="token comment">// 上面的方式优于:</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// doSomething here</span>
<span class="token punctuation">}</span>
<span class="token comment">// 前一种方式只会计算一次 arr 的长度，而后一种方式会计算 arr.length + 1 次，效率比较低</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li></ul> <h2 id="保持一致性"><a href="#保持一致性" aria-hidden="true" class="header-anchor">#</a> 保持一致性</h2> <p>当你在编辑代码之前, 先花一些时间查看一下现有代码的风格. 如果他们给算术运算符添加了空格, 你也应该添加. 如果他们的注释使用一个个星号盒子, 那么也请你使用这种方式.</p> <p>代码风格中一个关键点是整理一份常用词汇表, 开发者认同它并且遵循, 这样在代码中就能统一表述. 我们在这提出了一些全局上的风格规则, 但也要考虑自身情况形成自己的代码风格. 但如果你添加的代码和现有的代码有很大的区别, 这就让阅读者感到很不和谐. 所以, 避免这种情况的发生.</p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/Leeesin/IPayNow-FE/edit/master/docs/开发规范/js开发规范.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">1/25/2019, 2:28:45 PM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/IPayNow-FE/assets/js/app.431e6833.js" defer></script><script src="/IPayNow-FE/assets/js/43.2b5564b9.js" defer></script>
  </body>
</html>
